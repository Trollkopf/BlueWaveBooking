import{r as _,c as y,o as i,w as D,a as t,t as a,g as c,n as p,d as b,F as v,e as k,f as x}from"./app-iwPyhcQ0.js";import{B}from"./BackofficeLayout-mxtjcB0d.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={components:{BackofficeLayout:B},data(){return{user:null,reservations:[],stats:{total:0,lastWeek:0,lastMonth:0}}},async mounted(){await this.fetchUserData(),await this.fetchReservations()},computed:{daysRegistered(){var r;if(!((r=this.user)!=null&&r.created_at))return"Desconocido";const e=new Date(this.user.created_at);return Math.floor((new Date-e)/(1e3*60*60*24))}},methods:{async fetchUserData(){try{const e=await x.get("/api/user");this.user=e.data}catch(e){console.error("Error al cargar los datos del usuario:",e)}},async fetchReservations(){try{const e=await x.get("/api/my-reservations");this.reservations=e.data.data,this.stats.total=this.reservations.length;const s=new Date,r=new Date;r.setDate(s.getDate()-7);const d=new Date;d.setDate(s.getDate()-30),this.stats.lastWeek=this.reservations.filter(o=>new Date(o.date)>=r).length,this.stats.lastMonth=this.reservations.filter(o=>new Date(o.date)>=d).length}catch(e){console.error("Error al cargar las reservas:",e)}},formatTimeSlot(e){return{morning:"Mañana",afternoon:"Tarde",full:"Día Completo"}[e]||"Desconocido"},getStatusClass(e){return{pending:"text-yellow-500",confirmed:"text-green-500",cancelled:"text-red-500"}[e]||"text-gray-500"}}},R={class:"text-2xl font-bold mb-4"},E={class:"bg-white shadow-md rounded-lg p-6 mb-6"},S={class:"grid grid-cols-3 gap-4 mb-6"},T={class:"bg-blue-200 p-4 rounded shadow"},L={class:"text-xl font-bold"},W={class:"bg-green-200 p-4 rounded shadow"},F={class:"text-xl font-bold"},N={class:"bg-yellow-200 p-4 rounded shadow"},I={class:"text-xl font-bold"},U={class:"bg-white shadow-md rounded-lg p-6"},V={class:"w-full border-collapse border border-gray-300"},z={class:"p-2 border"},A={class:"p-2 border"};function H(e,s,r,d,o,n){const w=_("BackofficeLayout");return i(),y(w,null,{default:D(()=>{var u,g,h,m,f;return[t("h2",R,"Bienvenido, "+a((u=o.user)==null?void 0:u.name),1),t("div",E,[s[4]||(s[4]=t("h3",{class:"text-lg font-semibold"},"Información de la Cuenta",-1)),t("p",null,[s[0]||(s[0]=t("strong",null,"Email:",-1)),c(" "+a((g=o.user)==null?void 0:g.email),1)]),t("p",null,[s[1]||(s[1]=t("strong",null,"Teléfono:",-1)),c(" "+a(((h=o.user)==null?void 0:h.phone)||"No registrado"),1)]),t("p",null,[s[2]||(s[2]=t("strong",null,"Registrado hace:",-1)),c(" "+a(n.daysRegistered)+" días",1)]),t("p",null,[s[3]||(s[3]=t("strong",null,"Estado de la Cuenta:",-1)),t("span",{class:p(n.getStatusClass((m=o.user)==null?void 0:m.status))},a(((f=o.user)==null?void 0:f.status)||"Activo"),3)])]),t("div",S,[t("div",T,[s[5]||(s[5]=t("h3",{class:"text-lg font-semibold"},"Total Reservas",-1)),t("p",L,a(o.stats.total),1)]),t("div",W,[s[6]||(s[6]=t("h3",{class:"text-lg font-semibold"},"Últimos 7 días",-1)),t("p",F,a(o.stats.lastWeek),1)]),t("div",N,[s[7]||(s[7]=t("h3",{class:"text-lg font-semibold"},"Últimos 30 días",-1)),t("p",I,a(o.stats.lastMonth),1)])]),t("div",U,[s[9]||(s[9]=t("h3",{class:"text-lg font-semibold mb-3"},"Mis Reservas",-1)),t("table",V,[s[8]||(s[8]=t("thead",null,[t("tr",{class:"bg-gray-200"},[t("th",{class:"p-2 border"},"Fecha"),t("th",{class:"p-2 border"},"Horario"),t("th",{class:"p-2 border"},"Estado")])],-1)),t("tbody",null,[(i(!0),b(v,null,k(o.reservations,l=>(i(),b("tr",{key:l.id,class:"text-center"},[t("td",z,a(l.date),1),t("td",A,a(n.formatTimeSlot(l.time_slot)),1),t("td",{class:p(["p-2 border",n.getStatusClass(l.status)])},a(l.status),3)]))),128))])])])]}),_:1})}const J=C(M,[["render",H],["__scopeId","data-v-602598d6"]]);export{J as default};
