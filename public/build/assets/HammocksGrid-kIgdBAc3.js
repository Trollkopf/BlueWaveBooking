import{d as r,o as d,a as o,j as m,k as h,g,i as f,v as u,F as v,e as w,l as b,f as n,n as x,t as k}from"./app-iwPyhcQ0.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={data(){return{rows:1,cols:1,grid:[],gridMap:new Map,isModified:!1,isSaving:!1,showNotification:!1}},computed:{gridStyle(){return{gridTemplateColumns:`repeat(${this.cols}, minmax(100px, 1fr))`}}},async mounted(){await this.loadGridData()},methods:{async loadGridData(){try{const a=await n.get("/api/hammock-spaces/backoffice");a.data.length>0&&(this.gridMap=new Map(a.data.map(e=>[`${e.row}-${e.col}`,e])),this.rows=Math.max(...a.data.map(e=>e.row))+1,this.cols=Math.max(...a.data.map(e=>e.col))+1),this.updateGrid()}catch(a){console.error("Error loading grid data:",a)}},updateGrid(){this.grid=[];for(let a=0;a<this.rows;a++)for(let e=0;e<this.cols;e++){const l=`${a}-${e}`;this.gridMap.has(l)?this.grid.push({...this.gridMap.get(l)}):this.grid.push({id:null,row:a,col:e,hammocks:2})}this.isModified=!0},getCellClass(a){return a.hammocks===0?"bg-black text-white":a.hammocks===1?"bg-yellow-400 text-black":"bg-green-400 text-white"},getHammockLabel(a){return a===0?"D":a},toggleHammocks(a){a.hammocks=(a.hammocks+1)%3,this.gridMap.set(`${a.row}-${a.col}`,a),this.isModified=!0},async saveGridConfig(){this.isSaving=!0;try{for(const[a,e]of this.gridMap){const[l,c]=a.split("-").map(Number);(l>=this.rows||c>=this.cols)&&(await n.delete(`/api/hammock-spaces/${e.id}`),this.gridMap.delete(a))}for(const a of this.grid)if(a.id===null){const e=await n.post("/api/hammock-spaces",a);a.id=e.data.id,this.gridMap.set(`${a.row}-${a.col}`,a)}else await n.put(`/api/hammock-spaces/${a.id}`,{hammocks:a.hammocks});this.isModified=!1,this.showNotification=!0,setTimeout(()=>{this.showNotification=!1},3e3),console.log("Grid saved successfully")}catch(a){console.error("Error saving grid data:",a)}finally{this.isSaving=!1}}}},C={class:"bg-white p-4 shadow-md rounded-lg relative"},G={key:1,class:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white px-4 py-2 rounded-lg shadow-lg"},N={key:2,class:"fixed top-12 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg"},S={class:"flex gap-4 mb-4 items-center"},H=["onClick"],D={class:"text-lg font-bold"};function V(a,e,l,c,i,s){return d(),r("div",C,[e[8]||(e[8]=o("h2",{class:"text-lg font-bold mb-3"},"DistribuciÃ³n de Hamacas",-1)),i.isModified?(d(),r("button",{key:0,onClick:e[0]||(e[0]=(...t)=>s.saveGridConfig&&s.saveGridConfig(...t)),class:"fixed top-4 right-4 bg-blue-500 text-white px-6 py-3 rounded-full shadow-lg hover:bg-blue-600 transition z-50"}," ðŸ’¾ Guardar ")):m("",!0),i.isSaving?(d(),r("div",G," Guardando... ")):m("",!0),i.showNotification?(d(),r("div",N," Â¡Guardado exitosamente! ")):m("",!0),o("div",S,[o("label",null,[e[5]||(e[5]=g(" Filas: ")),f(o("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=t=>i.rows=t),min:"1",class:"border p-1 rounded",onChange:e[2]||(e[2]=(...t)=>s.updateGrid&&s.updateGrid(...t))},null,544),[[u,i.rows,void 0,{number:!0}]])]),o("label",null,[e[6]||(e[6]=g(" Columnas: ")),f(o("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=t=>i.cols=t),min:"1",class:"border p-1 rounded",onChange:e[4]||(e[4]=(...t)=>s.updateGrid&&s.updateGrid(...t))},null,544),[[u,i.cols,void 0,{number:!0}]])]),e[7]||(e[7]=h('<div class="flex items-center gap-2 ml-4" data-v-f25aafa0><div class="w-6 h-6 bg-green-400 border rounded" data-v-f25aafa0></div><span class="text-sm" data-v-f25aafa0>2 Hamacas</span><div class="w-6 h-6 bg-yellow-400 border rounded" data-v-f25aafa0></div><span class="text-sm" data-v-f25aafa0>1 Hamaca</span><div class="w-6 h-6 bg-black text-white border rounded" data-v-f25aafa0></div><span class="text-sm" data-v-f25aafa0>Desactivado</span></div>',1))]),o("div",{style:b(s.gridStyle),class:"grid gap-4"},[(d(!0),r(v,null,w(i.grid,(t,p)=>(d(),r("div",{key:p,class:x(["p-4 border rounded-lg text-center font-semibold relative cursor-pointer transition-all flex items-center justify-center",s.getCellClass(t)]),onClick:_=>s.toggleHammocks(t)},[o("span",D,k(s.getHammockLabel(t.hammocks)),1)],10,H))),128))],4)])}const B=y(M,[["render",V],["__scopeId","data-v-f25aafa0"]]);export{B as default};
