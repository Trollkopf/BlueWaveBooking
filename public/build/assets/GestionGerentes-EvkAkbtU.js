import{d as l,o as d,a as e,i as c,v as u,F as g,e as p,t as a,f as i,n as b}from"./app-iwPyhcQ0.js";import{d as h}from"./debounce-CiJp1Z13.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const m={data(){return{users:[],searchQuery:"",currentPage:1,totalPages:1}},async mounted(){await this.fetchUsers()},methods:{async fetchUsers(){try{const t=await i.get("/api/users",{params:{page:this.currentPage,search:this.searchQuery}});this.users=t.data.data,this.totalPages=t.data.last_page}catch(t){console.error("Error al obtener usuarios:",t)}},async toggleManager(t){try{const s=t.role==="manager"?"user":"manager";await i.put(`/api/users/${t.id}/role`,{role:s}),this.fetchUsers()}catch(s){console.error("Error al cambiar el rol del usuario:",s)}},async changePage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,await this.fetchUsers())},debouncedFetchUsers:h(function(){this.fetchUsers()},500)}},x={class:"bg-white p-6 shadow-md rounded-lg"},_={class:"mb-4 flex justify-between"},f={class:"overflow-x-auto"},P={class:"min-w-full bg-white border border-gray-300"},v={class:"py-2 px-4 border"},w={class:"py-2 px-4 border"},U={class:"py-2 px-4 border"},k={class:"py-2 px-4 border"},G=["onClick"],C={class:"mt-4 flex justify-between"},F=["disabled"],B=["disabled"];function E(t,s,Q,M,o,n){return d(),l("div",x,[s[5]||(s[5]=e("h2",{class:"text-xl font-bold mb-4"},"Gestión de Gerentes",-1)),e("div",_,[c(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=r=>o.searchQuery=r),placeholder:"Buscar por nombre...",class:"border p-2 rounded w-1/3",onInput:s[1]||(s[1]=(...r)=>n.debouncedFetchUsers&&n.debouncedFetchUsers(...r))},null,544),[[u,o.searchQuery]])]),e("div",f,[e("table",P,[s[4]||(s[4]=e("thead",null,[e("tr",{class:"bg-gray-200"},[e("th",{class:"py-2 px-4 border"},"Nombre"),e("th",{class:"py-2 px-4 border"},"Email"),e("th",{class:"py-2 px-4 border"},"Rol"),e("th",{class:"py-2 px-4 border"},"Acción")])],-1)),e("tbody",null,[(d(!0),l(g,null,p(o.users,r=>(d(),l("tr",{key:r.id,class:"text-center"},[e("td",v,a(r.name),1),e("td",w,a(r.email),1),e("td",U,a(r.role==="manager"?"Gerente":"Usuario"),1),e("td",k,[e("button",{onClick:R=>n.toggleManager(r),class:b(["px-4 py-2 rounded text-white",r.role==="manager"?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"])},a(r.role==="manager"?"Revocar Gerente":"Convertir en Gerente"),11,G)])]))),128))])])]),e("div",C,[e("button",{onClick:s[2]||(s[2]=r=>n.changePage(o.currentPage-1)),disabled:o.currentPage===1,class:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50"}," ◀ Anterior ",8,F),e("span",null,"Página "+a(o.currentPage)+" de "+a(o.totalPages),1),e("button",{onClick:s[3]||(s[3]=r=>n.changePage(o.currentPage+1)),disabled:o.currentPage===o.totalPages,class:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50"}," Siguiente ▶ ",8,B)])])}const I=y(m,[["render",E],["__scopeId","data-v-a1e5d825"]]);export{I as default};
