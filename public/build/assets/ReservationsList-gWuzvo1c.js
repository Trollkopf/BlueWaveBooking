import{d as n,o as d,a as e,j as b,t as l,F as g,e as p,i as h,v as y,f as u,n as m}from"./app-CCHkntkr.js";import{_ as f}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _={data(){return{reservations:{data:[],current_page:1,last_page:1,prev_page_url:null,next_page_url:null},todayDate:new Date().toISOString().split("T")[0],showHistoryModal:!1,searchDate:""}},computed:{filteredReservations(){return this.reservations.data.filter(s=>s.date)}},mounted(){this.fetchReservations()},methods:{formatDate(s){if(!s)return"Fecha no disponible";const t={year:"numeric",month:"long",day:"2-digit"};return new Date(s).toLocaleDateString("es-ES",t)},async fetchReservations(s="/bookings/today"){try{const t=await u.get(s);this.reservations=t.data}catch(t){console.error("Error cargando las reservas:",t)}},async searchReservations(){if(this.searchDate)try{const s=await u.get(`/bookings?date=${this.searchDate}`);this.reservations=s.data,this.showHistoryModal=!1}catch(s){console.error("Error en la búsqueda de reservas:",s)}},formatTimeSlot(s){return{morning:"Mañana",afternoon:"Tarde",full_day:"Día Completo"}[s]||"Desconocido"},getStatusClass(s){return{pending:"text-yellow-500",confirmed:"text-green-500",cancelled:"text-red-500"}[s]||"text-gray-500"}}},v={class:"bg-white p-4 shadow-md rounded-lg"},x={class:"text-lg font-bold mb-3"},w={class:"flex gap-4 mb-4"},D={class:"w-full border-collapse border border-gray-300"},k={class:"p-2 border border-gray-300"},C={class:"p-2 border border-gray-300"},R={class:"p-2 border border-gray-300"},S={class:"p-2 border border-gray-300"},H={class:"mt-4 flex justify-between items-center"},M=["disabled"],B=["disabled"],E={key:0,class:"fixed inset-0 flex justify-center items-center bg-black bg-opacity-50"},F={class:"bg-white p-6 rounded-lg shadow-lg w-1/3"};function T(s,t,V,j,o,a){return d(),n("div",v,[e("h2",x,"Reservas del "+l(a.formatDate(this.searchDate||o.todayDate)),1),e("div",w,[e("button",{onClick:t[0]||(t[0]=r=>o.showHistoryModal=!0),class:"px-4 py-2 bg-blue-500 text-white rounded"}," 📅 Ver Otras fechas ")]),e("table",D,[t[6]||(t[6]=e("thead",null,[e("tr",{class:"bg-blue-500 text-white"},[e("th",{class:"p-2 border border-gray-300"},"Usuario"),e("th",{class:"p-2 border border-gray-300"},"Hamaca"),e("th",{class:"p-2 border border-gray-300"},"Fecha"),e("th",{class:"p-2 border border-gray-300"},"Horario"),e("th",{class:"p-2 border border-gray-300"},"Estado")])],-1)),e("tbody",null,[(d(!0),n(g,null,p(a.filteredReservations,r=>{var i,c;return d(),n("tr",{key:r.id,class:"text-center"},[e("td",k,l(((i=r.user)==null?void 0:i.name)||"Anónimo"),1),e("td",C,l(((c=r.hammock)==null?void 0:c.name)||"Sin datos"),1),e("td",R,l(r.date),1),e("td",S,l(a.formatTimeSlot(r.time_slot)),1),e("td",{class:m(["p-2 border border-gray-300",a.getStatusClass(r.status)])},l(r.status),3)])}),128))])]),e("div",H,[e("button",{onClick:t[1]||(t[1]=r=>a.fetchReservations(o.reservations.prev_page_url)),disabled:!o.reservations.prev_page_url,class:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50"}," ◀ Anterior ",8,M),e("span",null,"Página "+l(o.reservations.current_page)+" de "+l(o.reservations.last_page),1),e("button",{onClick:t[2]||(t[2]=r=>a.fetchReservations(o.reservations.next_page_url)),disabled:!o.reservations.next_page_url,class:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50"}," Siguiente ▶ ",8,B)]),o.showHistoryModal?(d(),n("div",E,[e("div",F,[t[7]||(t[7]=e("h3",{class:"text-lg font-bold mb-3"},"Historial de Reservas",-1)),t[8]||(t[8]=e("label",{class:"block font-semibold"},"Buscar por Fecha:",-1)),h(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>o.searchDate=r),type:"date",class:"border p-2 w-full rounded mb-2"},null,512),[[y,o.searchDate]]),e("button",{onClick:t[4]||(t[4]=(...r)=>a.searchReservations&&a.searchReservations(...r)),class:"bg-blue-500 text-white px-4 py-2 rounded w-full"}," 🔍 Buscar "),e("button",{onClick:t[5]||(t[5]=r=>o.showHistoryModal=!1),class:"mt-4 bg-gray-500 text-white px-4 py-2 rounded w-full"}," Cerrar ")])])):b("",!0)])}const N=f(_,[["render",T]]);export{N as default};
