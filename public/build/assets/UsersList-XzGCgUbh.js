import{d as a,o as i,a as s,j as b,i as p,v as y,F as c,e as u,t as d,f as l}from"./app-iwPyhcQ0.js";import{d as h}from"./debounce-CiJp1Z13.js";import{_ as m}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x={data(){return{users:[],searchQuery:"",showModal:!1,reservations:[],currentPage:1,totalPages:1}},async mounted(){await this.loadUsers()},methods:{async loadUsers(){try{const r=await l.get(`/api/users?page=${this.currentPage}&search=${this.searchQuery}`);this.users=r.data.data,this.totalPages=r.data.last_page}catch(r){console.error("Error loading users:",r)}},searchUsers:h(function(){this.currentPage=1,this.loadUsers()},500),async viewReservations(r){try{const e=await l.get(`/api/users/${r.id}/reservations`);this.reservations=e.data,this.showModal=!0}catch(e){console.error("Error loading reservations:",e)}},async deleteUser(r){if(confirm("¿Estás seguro de eliminar este usuario? Esto también eliminará sus reservas."))try{await l.delete(`/api/users/${r}`),this.users=this.users.filter(e=>e.id!==r)}catch(e){console.error("Error deleting user:",e)}},async changePage(r){r>=1&&r<=this.totalPages&&(this.currentPage=r,await this.loadUsers())},getTypeLabel(r){return r==="full"?"Día Completo":r==="morning"?"Mañana":"Tarde"}}},_={class:"bg-white p-4 shadow-md rounded-lg"},f={class:"mb-4"},v={class:"w-full border-collapse border border-gray-300"},w={class:"border border-gray-300 px-4 py-2"},P={class:"border border-gray-300 px-4 py-2"},k={class:"border border-gray-300 px-4 py-2"},U={class:"border border-gray-300 px-4 py-2 flex gap-2"},C=["onClick"],E=["onClick"],M={class:"mt-4 flex justify-between items-center"},L=["disabled"],B=["disabled"],D={key:0,class:"fixed inset-0 bg-gray-900 bg-opacity-50 flex justify-center items-center"},N={class:"bg-white p-6 rounded-lg shadow-lg w-1/3"},Q={key:0},T={key:1};function j(r,e,I,R,o,n){return i(),a("div",_,[e[7]||(e[7]=s("h2",{class:"text-lg font-bold mb-3"},"Listado de Usuarios",-1)),s("div",f,[p(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.searchQuery=t),placeholder:"Buscar por nombre o email...",class:"border p-2 rounded w-1/3",onInput:e[1]||(e[1]=(...t)=>n.searchUsers&&n.searchUsers(...t))},null,544),[[y,o.searchQuery]])]),s("table",v,[e[5]||(e[5]=s("thead",null,[s("tr",{class:"bg-gray-100"},[s("th",{class:"border border-gray-300 px-4 py-2"},"ID"),s("th",{class:"border border-gray-300 px-4 py-2"},"Nombre"),s("th",{class:"border border-gray-300 px-4 py-2"},"Email"),s("th",{class:"border border-gray-300 px-4 py-2"},"Acciones")])],-1)),s("tbody",null,[(i(!0),a(c,null,u(o.users,t=>(i(),a("tr",{key:t.id},[s("td",w,d(t.id),1),s("td",P,d(t.name),1),s("td",k,d(t.email),1),s("td",U,[s("button",{onClick:g=>n.viewReservations(t),class:"bg-blue-500 text-white px-2 py-1 rounded"},"📜 Historial",8,C),s("button",{onClick:g=>n.deleteUser(t.id),class:"bg-red-400 text-white px-2 py-1 rounded"},"🗑️ Eliminar",8,E)])]))),128))])]),s("div",M,[s("button",{onClick:e[2]||(e[2]=t=>n.changePage(o.currentPage-1)),disabled:o.currentPage===1,class:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50"}," ◀ Anterior ",8,L),s("span",null,"Página "+d(o.currentPage)+" de "+d(o.totalPages),1),s("button",{onClick:e[3]||(e[3]=t=>n.changePage(o.currentPage+1)),disabled:o.currentPage===o.totalPages,class:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50"}," Siguiente ▶ ",8,B)]),o.showModal?(i(),a("div",D,[s("div",N,[e[6]||(e[6]=s("h3",{class:"text-lg font-bold mb-3"},"Historial de Reservas",-1)),o.reservations.length>0?(i(),a("ul",Q,[(i(!0),a(c,null,u(o.reservations,t=>(i(),a("li",{key:t.id,class:"border-b py-2"},d(t.date)+" - "+d(n.getTypeLabel(t.type)),1))),128))])):(i(),a("p",T,"No hay reservas para este usuario.")),s("button",{onClick:e[4]||(e[4]=t=>o.showModal=!1),class:"mt-4 bg-gray-500 text-white px-4 py-2 rounded"},"Cerrar")])])):b("",!0)])}const H=m(x,[["render",j],["__scopeId","data-v-4cf39a01"]]);export{H as default};
